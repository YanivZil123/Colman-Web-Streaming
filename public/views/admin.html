<!doctype html><html><head>
<meta charset="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Admin · Disney+ Demo</title><link rel="stylesheet" href="/styles/style.css"/>
</head><body>
<header><div class="nav"><a href="/">← Home</a><strong>Admin</strong></div></header>
<div class="container">
  <form id="titleForm" enctype="multipart/form-data">
    <h2>Add Title</h2>
    <select id="type"><option>movie</option><option>series</option></select>
    <input id="name" placeholder="Name" required/>
    <input id="year" placeholder="Year" type="number" required/>
    <input id="genres" placeholder="Genres (comma-sep)"/>
    <textarea id="desc" placeholder="Description"></textarea>
    <input id="poster" type="file" accept="image/*"/>
    <input id="video" type="file" accept="video/mp4"/>
    <button class="btn primary">Create</button>
  </form>
</div>
<script src="/scripts/api.js"></script>
<script>
titleForm.addEventListener('submit', async (e)=>{
  e.preventDefault();
  const fd=new FormData();
  fd.append('type', type.value);
  fd.append('name', name.value);
  fd.append('year', year.value);
  fd.append('genres', genres.value);
  fd.append('description', desc.value);
  if(poster.files[0]) fd.append('poster', poster.files[0]);
  if(video.files[0]) fd.append('video', video.files[0]);
  const res=await fetch('/admin/titles',{ method:'POST', body: fd, credentials:'include' });
  alert(res.ok?'Created':'Failed');
});
</script></body></html>
